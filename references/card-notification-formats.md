# 한국 카드사 승인 문자 포맷

카드 결제 시 카드사에서 발송하는 SMS/MMS 알림 문자의 포맷 정리.
`scripts/parse-card-notification.ts`에서 파싱할 때 참고 자료로 사용.

## 공통 특징

- 대부분 `[Web발신]` 헤더로 시작
- 멀티라인 포맷이 주류 (줄별로 카드사명, 금액, 가맹점 등 분리)
- 금액은 `123,456원` 형태 (천 단위 콤마 + "원")
- 날짜는 `MM/DD HH:MM` 형태가 가장 일반적
- 승인/취소 구분 포함
- 일시불/할부 구분 포함

## 카드사별 포맷

### 삼성카드

```
[Web발신]
[삼성카드]
홍*동님
02/28 15:30
45,000원
스타벅스강남점
일시불
누적 1,234,567원
```

### 신한카드

```
[Web발신]
[신한카드]승인
홍*동님
02/28 15:30
(일시불)45,000원
스타벅스강남점
```

```
[Web발신]
[신한카드]승인
홍*동님
02/28 15:30
일시불 45,000원
스타벅스강남점
```

### KB국민카드

```
[Web발신]
[KB국민카드]
홍*동님 승인
02/28 15:30
45,000원
스타벅스강남점
일시불
```

```
[Web발신]
[KB]체크 승인
홍*동님
02/28 15:30
45,000원
스타벅스강남점
```

### 현대카드

```
[Web발신]
[현대카드]
홍*동님 승인
02/28 15:30
45,000원
스타벅스강남점
일시불
누적 1,234,567원
```

### 롯데카드

```
[Web발신]
[롯데카드]승인
홍*동님
02/28 15:30
45,000원
스타벅스강남점
일시불
```

### 하나카드

```
[Web발신]
[하나카드]
홍*동님 승인
02/28 15:30
45,000원
스타벅스강남점
일시불
```

### BC카드

```
[Web발신]
[BC카드]
홍*동님
02/28 15:30 승인
45,000원
스타벅스강남점
일시불
```

### NH농협카드

```
[Web발신]
[NH농협]
홍*동님 승인
02/28 15:30
45,000원
스타벅스강남점
일시불
```

### 우리카드

```
[Web발신]
[우리카드]
홍*동님 승인
02/28 15:30
45,000원
스타벅스강남점
일시불
```

### 씨티카드

```
[Web발신]
[씨티카드]승인
홍*동님
02/28 15:30
45,000원
스타벅스강남점
일시불
```

## 취소 문자

취소 문자는 "승인" 대신 "취소"가 포함되며, 나머지 구조는 동일:

```
[Web발신]
[삼성카드]취소
홍*동님
02/28 16:00
45,000원
스타벅스강남점
```

## 파싱 시 주의사항

1. **누적/잔액 금액 구분**: "누적 1,234,567원"이나 "잔액 500,000원"은 메인 결제 금액이 아님
2. **할부 표시**: "일시불", "3개월", "6개월" 등으로 표시
3. **카드사 변형 표기**: 같은 카드사도 여러 표기 (`KB국민카드`, `[KB]`, `KB카드` 등)
4. **체크카드**: "체크" 또는 "체크카드"가 포함될 수 있음
5. **법인카드**: "법인" 키워드가 포함될 수 있음 (e.g., `삼성법인`)
6. **승인번호**: 일부 카드사는 승인번호를 포함 (`승인번호 123456`)

## 참고

- [Kakao credit-card-sms-parser](https://github.com/kakao/credit-card-sms-parser) — 239개 테스트 케이스 보유
- 카드사별 포맷은 수시로 변경될 수 있으므로, 파서는 유연하게 설계해야 함
